{"version":3,"file":"Login.084676cff6b82bbe589c.js","mappings":"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","sources":["webpack://frontend/./src/api/v1/login/loginPrecheck.ts","webpack://frontend/./src/components/WelcomeLeftContainer/index.tsx","webpack://frontend/./src/components/WelcomeLeftContainer/styles.ts","webpack://frontend/./src/container/Login/index.tsx","webpack://frontend/./src/container/Login/styles.ts","webpack://frontend/./src/pages/Login/index.tsx"],"sourcesContent":["import axios from 'api';\nimport { ErrorResponseHandler } from 'api/ErrorResponseHandler';\nimport { AxiosError } from 'axios';\nimport { ErrorResponse, SuccessResponse } from 'types/api';\nimport { PayloadProps, Props } from 'types/api/user/loginPrecheck';\n\nconst loginPrecheck = async (\n\tprops: Props,\n): Promise<SuccessResponse<PayloadProps> | ErrorResponse> => {\n\ttry {\n\t\tconst response = await axios.get(\n\t\t\t`/loginPrecheck?email=${encodeURIComponent(\n\t\t\t\tprops.email,\n\t\t\t)}&ref=${encodeURIComponent(window.location.href)}`,\n\t\t);\n\n\t\treturn {\n\t\t\tstatusCode: 200,\n\t\t\terror: null,\n\t\t\tmessage: response.statusText,\n\t\t\tpayload: response.data.data,\n\t\t};\n\t} catch (error) {\n\t\treturn ErrorResponseHandler(error as AxiosError);\n\t}\n};\n\nexport default loginPrecheck;\n","import { Card, Space, Typography } from 'antd';\nimport { ReactChild } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Container, LeftContainer, Logo } from './styles';\n\nconst { Title } = Typography;\n\nfunction WelcomeLeftContainer({\n\tversion,\n\tchildren,\n}: WelcomeLeftContainerProps): JSX.Element {\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<Container>\n\t\t\t<LeftContainer direction=\"vertical\">\n\t\t\t\t<Space align=\"center\">\n\t\t\t\t\t<Logo src=\"/Logos/signoz-brand-logo.svg\" alt=\"logo\" />\n\t\t\t\t\t<Title style={{ fontSize: '46px', margin: 0 }}>SigNoz</Title>\n\t\t\t\t</Space>\n\t\t\t\t<Typography>{t('monitor_signup')}</Typography>\n\t\t\t\t<Card\n\t\t\t\t\tstyle={{ width: 'max-content' }}\n\t\t\t\t\tbodyStyle={{ padding: '1px 8px', width: '100%' }}\n\t\t\t\t>\n\t\t\t\t\tSigNoz {version}\n\t\t\t\t</Card>\n\t\t\t</LeftContainer>\n\t\t\t{children}\n\t\t</Container>\n\t);\n}\n\ninterface WelcomeLeftContainerProps {\n\tversion: string;\n\tchildren: ReactChild;\n}\n\nexport default WelcomeLeftContainer;\n","import { Space } from 'antd';\nimport styled from 'styled-components';\n\nexport const LeftContainer = styled(Space)`\n\tflex: 1;\n`;\n\nexport const Logo = styled.img`\n\twidth: 60px;\n`;\n\nexport const Container = styled.div`\n\t&&& {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tgap: 16px;\n\t\talign-items: center;\n\t\tmin-height: 100vh;\n\n\t\tmax-width: 1024px;\n\t\tmargin: 0 auto;\n\t}\n`;\n","import { Button, Form, Input, Space, Tooltip, Typography } from 'antd';\nimport getLocalStorageApi from 'api/browser/localstorage/get';\nimport setLocalStorageApi from 'api/browser/localstorage/set';\nimport loginApi from 'api/v1/login/login';\nimport loginPrecheckApi from 'api/v1/login/loginPrecheck';\nimport getUserVersion from 'api/v1/version/getVersion';\nimport afterLogin from 'AppRoutes/utils';\nimport { LOCALSTORAGE } from 'constants/localStorage';\nimport ROUTES from 'constants/routes';\nimport { useNotifications } from 'hooks/useNotifications';\nimport history from 'lib/history';\nimport { useAppContext } from 'providers/App/App';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useQuery } from 'react-query';\nimport APIError from 'types/api/error';\nimport { PayloadProps as PrecheckResultType } from 'types/api/user/loginPrecheck';\n\nimport { FormContainer, FormWrapper, Label, ParentContainer } from './styles';\n\nconst { Title } = Typography;\n\ninterface LoginProps {\n\tjwt: string;\n\trefreshjwt: string;\n\tuserId: string;\n\tssoerror: string;\n\twithPassword: string;\n}\n\ntype FormValues = { email: string; password: string };\n\nfunction Login({\n\tjwt,\n\trefreshjwt,\n\tuserId,\n\tssoerror = '',\n\twithPassword = '0',\n}: LoginProps): JSX.Element {\n\tconst { t } = useTranslation(['login']);\n\tconst [isLoading, setIsLoading] = useState<boolean>(false);\n\tconst { user } = useAppContext();\n\n\tconst [precheckResult, setPrecheckResult] = useState<PrecheckResultType>({\n\t\tsso: false,\n\t\tssoUrl: '',\n\t\tcanSelfRegister: false,\n\t\tisUser: true,\n\t});\n\n\tconst [precheckInProcess, setPrecheckInProcess] = useState(false);\n\tconst [precheckComplete, setPrecheckComplete] = useState(false);\n\n\tconst { notifications } = useNotifications();\n\n\tconst getUserVersionResponse = useQuery({\n\t\tqueryFn: getUserVersion,\n\t\tqueryKey: ['getUserVersion', user?.accessJwt],\n\t\tenabled: true,\n\t});\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tgetUserVersionResponse.isFetched &&\n\t\t\tgetUserVersionResponse.data &&\n\t\t\tgetUserVersionResponse.data.payload\n\t\t) {\n\t\t\tconst { setupCompleted } = getUserVersionResponse.data.payload;\n\t\t\tif (!setupCompleted) {\n\t\t\t\t// no org account registered yet, re-route user to sign up first\n\t\t\t\thistory.push(ROUTES.SIGN_UP);\n\t\t\t}\n\t\t}\n\t}, [getUserVersionResponse]);\n\n\tconst [form] = Form.useForm<FormValues>();\n\n\tuseEffect(() => {\n\t\tif (withPassword === 'Y') {\n\t\t\tsetPrecheckComplete(true);\n\t\t}\n\t}, [withPassword]);\n\n\tuseEffect(() => {\n\t\tasync function processJwt(): Promise<void> {\n\t\t\tif (jwt && jwt !== '') {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tawait afterLogin(userId, jwt, refreshjwt);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tconst fromPathname = getLocalStorageApi(\n\t\t\t\t\tLOCALSTORAGE.UNAUTHENTICATED_ROUTE_HIT,\n\t\t\t\t);\n\t\t\t\tif (fromPathname) {\n\t\t\t\t\thistory.push(fromPathname);\n\t\t\t\t\tsetLocalStorageApi(LOCALSTORAGE.UNAUTHENTICATED_ROUTE_HIT, '');\n\t\t\t\t} else {\n\t\t\t\t\thistory.push(ROUTES.APPLICATION);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tprocessJwt();\n\t}, [jwt, refreshjwt, userId]);\n\n\tuseEffect(() => {\n\t\tif (ssoerror !== '') {\n\t\t\tnotifications.error({\n\t\t\t\tmessage: t('failed_to_login'),\n\t\t\t});\n\t\t}\n\t}, [ssoerror, t, notifications]);\n\n\tconst onNextHandler = async (): Promise<void> => {\n\t\tconst email = form.getFieldValue('email');\n\t\tif (!email) {\n\t\t\tnotifications.error({\n\t\t\t\tmessage: t('invalid_email'),\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tsetPrecheckInProcess(true);\n\t\ttry {\n\t\t\tconst response = await loginPrecheckApi({\n\t\t\t\temail,\n\t\t\t});\n\n\t\t\tif (response.statusCode === 200) {\n\t\t\t\tsetPrecheckResult({ ...precheckResult, ...response.payload });\n\n\t\t\t\tconst { isUser } = response.payload;\n\t\t\t\tif (isUser) {\n\t\t\t\t\tsetPrecheckComplete(true);\n\t\t\t\t} else {\n\t\t\t\t\tnotifications.error({\n\t\t\t\t\t\tmessage: t('invalid_account'),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnotifications.error({\n\t\t\t\t\tmessage: t('invalid_config'),\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('failed to call precheck Api', e);\n\t\t\tnotifications.error({ message: t('unexpected_error') });\n\t\t}\n\t\tsetPrecheckInProcess(false);\n\t};\n\n\tconst { sso, canSelfRegister } = precheckResult;\n\n\tconst onSubmitHandler: () => Promise<void> = async () => {\n\t\ttry {\n\t\t\tconst { email, password } = form.getFieldsValue();\n\t\t\tif (!precheckComplete) {\n\t\t\t\tonNextHandler();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (precheckComplete && sso) {\n\t\t\t\twindow.location.href = precheckResult.ssoUrl || '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetIsLoading(true);\n\n\t\t\tconst response = await loginApi({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t});\n\n\t\t\tafterLogin(\n\t\t\t\tresponse.data.userId,\n\t\t\t\tresponse.data.accessJwt,\n\t\t\t\tresponse.data.refreshJwt,\n\t\t\t);\n\t\t\tsetIsLoading(false);\n\t\t} catch (error) {\n\t\t\tsetIsLoading(false);\n\t\t\tnotifications.error({\n\t\t\t\tmessage: (error as APIError).getErrorCode(),\n\t\t\t\tdescription: (error as APIError).getErrorMessage(),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst renderSAMLAction = (): JSX.Element => (\n\t\t<Button\n\t\t\ttype=\"primary\"\n\t\t\tloading={isLoading}\n\t\t\tdisabled={isLoading}\n\t\t\thref={precheckResult.ssoUrl}\n\t\t>\n\t\t\t{t('login_with_sso')}\n\t\t</Button>\n\t);\n\n\tconst renderOnSsoError = (): JSX.Element | null => {\n\t\tif (!ssoerror) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Typography.Paragraph italic style={{ color: '#ACACAC' }}>\n\t\t\t\t{t('prompt_on_sso_error')}{' '}\n\t\t\t\t<a href=\"/login?password=Y\">{t('login_with_pwd')}</a>.\n\t\t\t</Typography.Paragraph>\n\t\t);\n\t};\n\n\treturn (\n\t\t<FormWrapper>\n\t\t\t<FormContainer form={form} onFinish={onSubmitHandler}>\n\t\t\t\t<Title level={4}>{t('login_page_title')}</Title>\n\t\t\t\t<ParentContainer>\n\t\t\t\t\t<Label htmlFor=\"signupEmail\">{t('label_email')}</Label>\n\t\t\t\t\t<FormContainer.Item name=\"email\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tid=\"loginEmail\"\n\t\t\t\t\t\t\tdata-testid=\"email\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tplaceholder={t('placeholder_email')}\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormContainer.Item>\n\t\t\t\t</ParentContainer>\n\t\t\t\t{precheckComplete && !sso && (\n\t\t\t\t\t<ParentContainer>\n\t\t\t\t\t\t<Label htmlFor=\"Password\">{t('label_password')}</Label>\n\t\t\t\t\t\t<FormContainer.Item name=\"password\">\n\t\t\t\t\t\t\t<Input.Password\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tid=\"currentPassword\"\n\t\t\t\t\t\t\t\tdata-testid=\"password\"\n\t\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormContainer.Item>\n\t\t\t\t\t\t<Tooltip title={t('prompt_forgot_password')}>\n\t\t\t\t\t\t\t<Typography.Link>{t('forgot_password')}</Typography.Link>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</ParentContainer>\n\t\t\t\t)}\n\t\t\t\t<Space\n\t\t\t\t\tstyle={{ marginTop: '1.3125rem' }}\n\t\t\t\t\talign=\"start\"\n\t\t\t\t\tdirection=\"vertical\"\n\t\t\t\t\tsize={20}\n\t\t\t\t>\n\t\t\t\t\t{!precheckComplete && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={precheckInProcess}\n\t\t\t\t\t\t\tloading={precheckInProcess}\n\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\tonClick={onNextHandler}\n\t\t\t\t\t\t\tdata-testid=\"initiate_login\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('button_initiate_login')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{precheckComplete && !sso && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={isLoading}\n\t\t\t\t\t\t\tloading={isLoading}\n\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\thtmlType=\"submit\"\n\t\t\t\t\t\t\tdata-attr=\"signup\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('button_login')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{precheckComplete && sso && renderSAMLAction()}\n\t\t\t\t\t{!precheckComplete && ssoerror && renderOnSsoError()}\n\n\t\t\t\t\t{!canSelfRegister && (\n\t\t\t\t\t\t<Typography.Paragraph italic style={{ color: '#ACACAC' }}>\n\t\t\t\t\t\t\t{t('prompt_no_account')}\n\t\t\t\t\t\t</Typography.Paragraph>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{canSelfRegister && (\n\t\t\t\t\t\t<Typography.Paragraph italic style={{ color: '#ACACAC' }}>\n\t\t\t\t\t\t\t{t('prompt_if_admin')}{' '}\n\t\t\t\t\t\t\t<Typography.Link\n\t\t\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\t\t\thistory.push(ROUTES.SIGN_UP);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tstyle={{ fontWeight: 700 }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('create_an_account')}\n\t\t\t\t\t\t\t</Typography.Link>\n\t\t\t\t\t\t</Typography.Paragraph>\n\t\t\t\t\t)}\n\t\t\t\t</Space>\n\t\t\t</FormContainer>\n\t\t</FormWrapper>\n\t);\n}\n\nexport default Login;\n","import { Card, Form } from 'antd';\nimport styled from 'styled-components';\n\nexport const FormWrapper = styled(Card)`\n\tdisplay: flex;\n\tjustify-content: center;\n\tmin-width: 390px;\n\tmin-height: 430px;\n\tmax-width: 432px;\n\tflex: 1;\n\talign-items: flex-start;\n\t&&&.ant-card-body {\n\t\tmin-width: 100%;\n\t}\n`;\n\nexport const Label = styled.label`\n\tmargin-bottom: 11px;\n\tmargin-top: 19px;\n\tdisplay: inline-block;\n\tfont-size: 1rem;\n\tline-height: 24px;\n`;\n\nexport const FormContainer = styled(Form)`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\twidth: 100%;\n\n\t& .ant-form-item {\n\t\tmargin-bottom: 0px;\n\t}\n`;\n\nexport const ParentContainer = styled.div`\n\twidth: 100%;\n`;\n","import { Typography } from 'antd';\nimport getUserVersion from 'api/v1/version/getVersion';\nimport Spinner from 'components/Spinner';\nimport WelcomeLeftContainer from 'components/WelcomeLeftContainer';\nimport LoginContainer from 'container/Login';\nimport useURLQuery from 'hooks/useUrlQuery';\nimport { useAppContext } from 'providers/App/App';\nimport { useTranslation } from 'react-i18next';\nimport { useQuery } from 'react-query';\n\nfunction Login(): JSX.Element {\n\tconst { isLoggedIn } = useAppContext();\n\tconst { t } = useTranslation();\n\n\tconst urlQueryParams = useURLQuery();\n\tconst jwt = urlQueryParams.get('jwt') || '';\n\tconst refreshJwt = urlQueryParams.get('refreshjwt') || '';\n\tconst userId = urlQueryParams.get('usr') || '';\n\tconst ssoerror = urlQueryParams.get('ssoerror') || '';\n\tconst withPassword = urlQueryParams.get('password') || '';\n\n\tconst versionResult = useQuery({\n\t\tqueryFn: getUserVersion,\n\t\tqueryKey: ['getUserVersion', jwt],\n\t\tenabled: !isLoggedIn,\n\t});\n\n\tif (\n\t\tversionResult.status === 'error' ||\n\t\t(versionResult.status === 'success' && versionResult?.data.statusCode !== 200)\n\t) {\n\t\treturn (\n\t\t\t<Typography>\n\t\t\t\t{versionResult.data?.error || t('something_went_wrong')}\n\t\t\t</Typography>\n\t\t);\n\t}\n\n\tif (\n\t\tversionResult.status === 'loading' ||\n\t\t!(versionResult.data && versionResult.data.payload)\n\t) {\n\t\treturn <Spinner tip=\"Loading...\" />;\n\t}\n\n\tconst { version } = versionResult.data.payload;\n\n\treturn (\n\t\t<WelcomeLeftContainer version={version}>\n\t\t\t<LoginContainer\n\t\t\t\tssoerror={ssoerror}\n\t\t\t\tjwt={jwt}\n\t\t\t\trefreshjwt={refreshJwt}\n\t\t\t\tuserId={userId}\n\t\t\t\twithPassword={withPassword}\n\t\t\t/>\n\t\t</WelcomeLeftContainer>\n\t);\n}\n\nexport default Login;\n"],"names":["loginPrecheck","async","response","axios","get","concat","encodeURIComponent","props","email","window","location","href","statusCode","error","message","statusText","payload","data","ErrorResponseHandler","_default","reactHotLoader","leaveModule","reactHotLoaderGlobal","default","undefined","register","module","Title","Typography","WelcomeLeftContainer","_ref","version","children","t","useTranslation","_jsxs","Container","LeftContainer","direction","Space","align","_jsx","Logo","src","alt","style","fontSize","margin","Card","width","bodyStyle","padding","__signature__","styled","_templateObject","_taggedTemplateLiteral","img","_templateObject2","div","_templateObject3","Login","jwt","refreshjwt","userId","ssoerror","withPassword","isLoading","setIsLoading","useState","user","useAppContext","precheckResult","setPrecheckResult","sso","ssoUrl","canSelfRegister","isUser","precheckInProcess","setPrecheckInProcess","precheckComplete","setPrecheckComplete","notifications","useNotifications","getUserVersionResponse","useQuery","queryFn","getUserVersion","queryKey","accessJwt","enabled","useEffect","isFetched","setupCompleted","history","push","ROUTES","SIGN_UP","form","Form","useForm","afterLogin","fromPathname","getLocalStorageApi","LOCALSTORAGE","UNAUTHENTICATED_ROUTE_HIT","setLocalStorageApi","APPLICATION","processJwt","onNextHandler","getFieldValue","loginPrecheckApi","e","console","log","FormWrapper","FormContainer","onFinish","password","getFieldsValue","loginApi","refreshJwt","getErrorCode","description","getErrorMessage","level","ParentContainer","Label","htmlFor","Item","name","Input","type","id","required","placeholder","autoFocus","disabled","Password","Tooltip","title","Link","marginTop","size","Button","loading","onClick","htmlType","Paragraph","italic","color","fontWeight","label","_templateObject4","isLoggedIn","urlQueryParams","useURLQuery","versionResult","_versionResult$data","status","Spinner","tip","LoginContainer"],"sourceRoot":""}