!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="86fe3df0-cff4-4e65-bfa7-b8a898a273d1",e._sentryDebugIdIdentifier="sentry-dbid-86fe3df0-cff4-4e65-bfa7-b8a898a273d1")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"17f48d656df8bdfe8a78529d7f600f8c98790625"},(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["Edit Channels"],{425397:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.put("/channels/".concat(e.id),{name:e.name,email_configs:[{send_resolved:e.send_resolved,to:e.to,html:e.html,headers:e.headers}]});return{httpStatusCode:a.status,data:a.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editEmail","/home/ec2-user/signoz/frontend/src/api/channels/editEmail.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editEmail.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},570967:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.put("/channels/".concat(e.id),{name:e.name,msteamsv2_configs:[{send_resolved:e.send_resolved,webhook_url:e.webhook_url,title:e.title,text:e.text}]});return{httpStatusCode:a.status,data:a.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editMsTeams","/home/ec2-user/signoz/frontend/src/api/channels/editMsTeams.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editMsTeams.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},681837:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.put("/channels/".concat(e.id),{name:e.name,opsgenie_configs:[{send_resolved:e.send_resolved,api_key:e.api_key,description:e.description,priority:e.priority,message:e.message,details:{...e.detailsArray}}]});return{httpStatusCode:a.status,data:a.data}}catch(a){return(0,n.I)(a)}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editOpsgenie","/home/ec2-user/signoz/frontend/src/api/channels/editOpsgenie.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editOpsgenie.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},300134:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.put("/channels/".concat(e.id),{name:e.name,pagerduty_configs:[{send_resolved:e.send_resolved,routing_key:e.routing_key,client:e.client,client_url:e.client_url,description:e.description,severity:e.severity,class:e.class,component:e.component,group:e.group,details:{...e.detailsArray}}]});return{httpStatusCode:a.status,data:a.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editPager","/home/ec2-user/signoz/frontend/src/api/channels/editPager.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editPager.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},429037:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.put("/channels/".concat(e.id),{name:e.name,slack_configs:[{send_resolved:e.send_resolved,api_url:e.api_url,channel:e.channel,title:e.title,text:e.text}]});return{httpStatusCode:a.status,data:a.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editSlack","/home/ec2-user/signoz/frontend/src/api/channels/editSlack.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editSlack.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},199308:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{let a={};const t=e.username?e.username.trim():"",s=e.password?e.password.trim():"";""!==t&&""!==s?a={basic_auth:{username:t,password:s}}:""===t&&""!==s&&(a={authorization:{type:"Bearer",credentials:s}});const n=await r.Ay.put("/channels/".concat(e.id),{name:e.name,webhook_configs:[{send_resolved:e.send_resolved,url:e.api_url,http_config:a}]});return{httpStatusCode:n.status,data:n.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"editWebhook","/home/ec2-user/signoz/frontend/src/api/channels/editWebhook.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/editWebhook.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},495317:(e,a,t)=>{t.d(a,{A:()=>d});var s,r=t(6012),n=t(91345);e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=async e=>{try{const a=await r.Ay.get("/channels/".concat(e.id));return{httpStatusCode:a.status,data:a.data.data}}catch(a){throw(0,n.I)(a),a}},l=o,d=l;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"get","/home/ec2-user/signoz/frontend/src/api/channels/get.ts"),i.register(l,"default","/home/ec2-user/signoz/frontend/src/api/channels/get.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},40598:(e,a,t)=>{t.d(a,{A:()=>M});var s,r=t(760742),n=t(425397),o=t(570967),l=t(681837),d=t(300134),i=t(429037),c=t(199308),u=t(79333),f=t(561639),g=t(787773),p=t(945302),h=t(422269),_=t(6364),b=t(269376),y=t(521587),v=t(698030),m=t(843496),C=t(412549),L=t(291815),k=t(296540),H=t(218492),A=t(283205),w=t(474848);function G(e){let{initialValue:a}=e;const{t}=(0,H.B)("channels"),[s]=r.A.useForm(),[G,E]=(0,k.useState)({...a}),[M,S]=(0,k.useState)(!1),[T,z]=(0,k.useState)(!1),{notifications:x}=(0,C.E$)(),{id:N}=(0,A.g)(),[q,I]=(0,k.useState)(null!=a&&a.type?a.type:v.C.Slack),O=(0,k.useCallback)((e=>{I(e)}),[]);(0,k.useEffect)((()=>{s.setFieldsValue({...a})}),[s,a]);const R=(0,k.useCallback)((()=>({api_url:(null==G?void 0:G.api_url)||"",channel:(null==G?void 0:G.channel)||"",name:(null==G?void 0:G.name)||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,text:(null==G?void 0:G.text)||"",title:(null==G?void 0:G.title)||"",id:N})),[N,G]),P=(0,k.useCallback)((async()=>{if(S(!0),""===(null==G?void 0:G.api_url))return x.error({message:"Error",description:t("webhook_url_required")}),S(!1),{status:"failed",statusMessage:t("webhook_url_required")};try{return await(0,i.A)(R()),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(e){return x.error({message:e.getErrorCode(),description:e.getErrorMessage()}),{status:"failed",statusMessage:e.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[R,t,x,G]),W=(0,k.useCallback)((()=>{const{name:e,username:a,password:t}=G;return{api_url:(null==G?void 0:G.api_url)||"",name:e||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,username:a,password:t,id:N}}),[N,G]),V=(0,k.useCallback)((async()=>{S(!0);const{username:e,password:a}=G,s=e=>{x.error({message:"Error",description:e})};if(""===(null==G?void 0:G.api_url))return s(t("webhook_url_required")),S(!1),{status:"failed",statusMessage:t("webhook_url_required")};if(e&&(!a||""===a))return s(t("username_no_password")),S(!1),{status:"failed",statusMessage:t("username_no_password")};try{return await(0,c.A)(W()),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(r){return x.error({message:r.getErrorCode(),description:r.getErrorMessage()}),{status:"failed",statusMessage:r.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[W,t,x,G]),F=(0,k.useCallback)((()=>({name:(null==G?void 0:G.name)||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,to:G.to||"",html:G.html||"",headers:G.headers||{},id:N})),[N,G]),B=(0,k.useCallback)((async()=>{S(!0);const e=F();try{return await(0,n.A)(e),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(a){return x.error({message:a.getErrorCode(),description:a.getErrorMessage()}),{status:"failed",statusMessage:a.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[F,t,x]),j=(0,k.useCallback)((()=>({name:G.name||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,routing_key:G.routing_key,client:G.client,client_url:G.client_url,description:G.description,severity:G.severity,component:G.component,class:G.class,group:G.group,details:G.details,detailsArray:JSON.parse(G.details||"{}"),id:N})),[N,G]),D=(0,k.useCallback)((async()=>{S(!0);const e=(0,v.T)(G);if(""!==e)return x.error({message:"Error",description:e}),S(!1),{status:"failed",statusMessage:e};try{return await(0,d.A)(j()),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(a){return x.error({message:a.getErrorCode(),description:a.getErrorMessage()}),{status:"failed",statusMessage:a.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[j,x,G,t]),J=(0,k.useCallback)((()=>({name:G.name||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,api_key:G.api_key||"",message:G.message||"",description:G.description||"",priority:G.priority||"",id:N})),[N,G]),Q=(0,k.useCallback)((async()=>{if(S(!0),""===(null==G?void 0:G.api_key))return x.error({message:"Error",description:t("api_key_required")}),S(!1),{status:"failed",statusMessage:t("api_key_required")};try{return await(0,l.A)(J()),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(e){return x.error({message:e.getErrorCode(),description:e.getErrorMessage()}),{status:"failed",statusMessage:e.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[J,t,x,G]),$=(0,k.useCallback)((()=>({webhook_url:(null==G?void 0:G.webhook_url)||"",name:(null==G?void 0:G.name)||"",send_resolved:(null==G?void 0:G.send_resolved)||!1,text:(null==G?void 0:G.text)||"",title:(null==G?void 0:G.title)||"",id:N})),[N,G]),Y=(0,k.useCallback)((async()=>{if(S(!0),""===(null==G?void 0:G.webhook_url))return x.error({message:"Error",description:t("webhook_url_required")}),S(!1),{status:"failed",statusMessage:t("webhook_url_required")};try{return await(0,o.A)($()),x.success({message:"Success",description:t("channel_edit_done")}),L.A.replace(y.A.ALL_CHANNELS),{status:"success",statusMessage:t("channel_edit_done")}}catch(e){return x.error({message:e.getErrorCode(),description:e.getErrorMessage()}),{status:"failed",statusMessage:e.getErrorMessage()||t("channel_edit_failed")}}finally{S(!1)}}),[$,t,x,G]),K=(0,k.useCallback)((async e=>{var a,t;let s;e===v.C.Slack?s=await P():e===v.C.Webhook?s=await V():e===v.C.Pagerduty?s=await D():e===v.C.MsTeams?s=await Y():e===v.C.Opsgenie?s=await Q():e===v.C.Email&&(s=await B()),(0,b.A)("Alert Channel: Save channel",{type:e,sendResolvedAlert:null==G?void 0:G.send_resolved,name:null==G?void 0:G.name,new:"false",status:null===(a=s)||void 0===a?void 0:a.status,statusMessage:null===(t=s)||void 0===t?void 0:t.statusMessage})}),[P,V,D,Y,Q,B]),U=(0,k.useCallback)((async e=>{z(!0);try{let a;switch(e){case v.C.Webhook:a=W(),await(0,_.A)(a);break;case v.C.Slack:a=R(),await(0,h.A)(a);break;case v.C.Pagerduty:a=j(),a&&await(0,p.A)(a);break;case v.C.MsTeams:a=$(),a&&await(0,f.A)(a);break;case v.C.Opsgenie:a=J(),a&&await(0,g.A)(a);break;case v.C.Email:a=F(),a&&await(0,u.A)(a);break;default:return x.error({message:"Error",description:t("test_unsupported")}),void z(!1)}x.success({message:"Success",description:t("channel_test_done")}),(0,b.A)("Alert Channel: Test notification",{type:e,sendResolvedAlert:null==G?void 0:G.send_resolved,name:null==G?void 0:G.name,new:"false",status:"Test success"})}catch(a){x.error({message:a.getErrorCode(),description:a.getErrorMessage()}),(0,b.A)("Alert Channel: Test notification",{type:e,sendResolvedAlert:null==G?void 0:G.send_resolved,name:null==G?void 0:G.name,new:"false",status:"Test failed"})}z(!1)}),[t,W,j,R,$,J,F,x]),X=(0,k.useCallback)((async e=>{U(e)}),[U]);return(0,w.jsx)(m.A,{formInstance:s,onTypeChangeHandler:O,setSelectedConfig:E,type:q,onTestHandler:X,onSaveHandler:K,testingState:T,savingState:M,title:t("page_title_edit"),initialValue:a,editing:!0})}e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(G,"useTranslation{{ t }}\nuseForm{[formInstance]}\nuseState{[selectedConfig, setSelectedConfig]({\n\t\t...initialValue,\n\t})}\nuseState{[savingState, setSavingState](false)}\nuseState{[testingState, setTestingState](false)}\nuseNotifications{{ notifications }}\nuseParams{{ id }}\nuseState{[type, setType](initialValue?.type ? (initialValue.type as ChannelType) : ChannelType.Slack)}\nuseCallback{onTypeChangeHandler}\nuseEffect{}\nuseCallback{prepareSlackRequest}\nuseCallback{onSlackEditHandler}\nuseCallback{prepareWebhookRequest}\nuseCallback{onWebhookEditHandler}\nuseCallback{prepareEmailRequest}\nuseCallback{onEmailEditHandler}\nuseCallback{preparePagerRequest}\nuseCallback{onPagerEditHandler}\nuseCallback{prepareOpsgenieRequest}\nuseCallback{onOpsgenieEditHandler}\nuseCallback{prepareMsTeamsRequest}\nuseCallback{onMsTeamsEditHandler}\nuseCallback{onSaveHandler}\nuseCallback{performChannelTest}\nuseCallback{onTestHandler}",(()=>[H.B,C.E$,A.g]));const E=G,M=E;var S,T;(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(G,"EditAlertChannels","/home/ec2-user/signoz/frontend/src/container/EditAlertChannels/index.tsx"),S.register(E,"default","/home/ec2-user/signoz/frontend/src/container/EditAlertChannels/index.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},126363:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s,r=t(167313),n=t(495317),o=t(847578),l=t(698030),d=t(40598),i=t(218492),c=t(775942),u=t(283205),f=t(474848);function g(){const{id:e}=(0,u.g)(),{t:a}=(0,i.B)(),{isFetching:t,isError:s,data:g,error:p}=(0,c.useQuery)(["getChannel",e],{queryFn:()=>(0,n.A)({id:e})});if(s)return(0,f.jsx)(r.A,{children:(null==p?void 0:p.getErrorMessage())||a("something_went_wrong")});if(t||null==g||!g.data)return(0,f.jsx)(o.A,{tip:"Loading Channels..."});const{data:h}=g.data,_=JSON.parse(h),b=(()=>{let e={name:""};if(_&&"slack_configs"in _){return e=_.slack_configs[0],{type:l.C.Slack,channel:e}}if(_&&"msteamsv2_configs"in _){return e=_.msteamsv2_configs[0],{type:l.C.MsTeams,channel:e}}if(_&&"pagerduty_configs"in _){const a=_.pagerduty_configs[0];return e=a,e.details=JSON.stringify(a.details),e.detailsArray={...a.details},{type:l.C.Pagerduty,channel:e}}if(_&&"opsgenie_configs"in _){return e=_.opsgenie_configs[0],{type:l.C.Opsgenie,channel:e}}if(_&&"email_configs"in _){return e=_.email_configs[0],{type:l.C.Email,channel:e}}if(_&&"webhook_configs"in _){const r=_.webhook_configs[0];if(e=r,e.api_url=r.url,"http_config"in r){const n=r.http_config;var a,t;if("basic_auth"in n)e.username=null===(a=r.http_config)||void 0===a||null===(a=a.basic_auth)||void 0===a?void 0:a.username,e.password=null===(t=r.http_config)||void 0===t||null===(t=t.basic_auth)||void 0===t?void 0:t.password;else if("authorization"in n){var s;e.password=null===(s=r.http_config)||void 0===s||null===(s=s.authorization)||void 0===s?void 0:s.credentials}}return{type:l.C.Webhook,channel:e}}return{type:l.C.Slack,channel:e}})();return(0,f.jsx)(d.A,{initialValue:{...b.channel,type:b.type,name:_.name}})}e=t.hmd(e),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(g,"useParams{{ id }}\nuseTranslation{{ t }}\nuseQuery{{ isFetching, isError, data, error }}",(()=>[u.g,i.B,c.useQuery]));const p=g,h=p;var _,b;(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(g,"ChannelsEdit","/home/ec2-user/signoz/frontend/src/pages/ChannelsEdit/index.tsx"),_.register(p,"default","/home/ec2-user/signoz/frontend/src/pages/ChannelsEdit/index.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)}}]);
//# sourceMappingURL=Edit Channels.31b24cea0da91ce65ab8.js.map