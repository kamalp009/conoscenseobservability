"use strict";var De=Object.create;var H=Object.defineProperty;var be=Object.getOwnPropertyDescriptor;var ke=Object.getOwnPropertyNames;var Pe=Object.getPrototypeOf,Se=Object.prototype.hasOwnProperty;var Te=(e,t)=>{for(var r in t)H(e,r,{get:t[r],enumerable:!0})},re=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of ke(t))!Se.call(e,c)&&c!==r&&H(e,c,{get:()=>t[c],enumerable:!(o=be(t,c))||o.enumerable});return e};var h=(e,t,r)=>(r=e!=null?De(Pe(e)):{},re(t||!e||!e.__esModule?H(r,"default",{value:e,enumerable:!0}):r,e)),Oe=e=>re(H({},"__esModule",{value:!0}),e);var Ae={};Te(Ae,{DiffEditor:()=>me,Editor:()=>$,default:()=>je,loader:()=>Re.default,useMonaco:()=>ye});module.exports=Oe(Ae);var Re=h(require("@monaco-editor/loader"));var le=require("react");var u=h(require("react")),pe=h(require("@monaco-editor/loader"));var ue=require("react");var _=h(require("react"));var we={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},W=we;var ne=h(require("react"));var Ie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},oe=Ie;function Le({children:e}){return ne.default.createElement("div",{style:oe.container},e)}var ie=Le;var ce=ie;function Ue({width:e,height:t,isEditorReady:r,loading:o,_ref:c,className:m,wrapperProps:g}){return _.default.createElement("section",{style:{...W.wrapper,width:e,height:t},...g},!r&&_.default.createElement(ce,null,o),_.default.createElement("div",{ref:c,style:{...W.fullWidth,...!r&&W.hide},className:m}))}var se=Ue;var N=(0,ue.memo)(se);var fe=require("react");function ve(e){(0,fe.useEffect)(e,[])}var k=ve;var V=require("react");function He(e,t,r=!0){let o=(0,V.useRef)(!0);(0,V.useEffect)(o.current||!r?()=>{o.current=!1}:e,t)}var l=He;function D(){}function P(e,t,r,o){return We(e,o)||_e(e,t,r,o)}function We(e,t){return e.editor.getModel(de(e,t))}function _e(e,t,r,o){return e.editor.createModel(t,r,o?de(e,o):void 0)}function de(e,t){return e.Uri.parse(t)}function Ne({original:e,modified:t,language:r,originalLanguage:o,modifiedLanguage:c,originalModelPath:m,modifiedModelPath:g,keepCurrentOriginalModel:S=!1,keepCurrentModifiedModel:j=!1,theme:C="light",loading:L="Loading...",options:E={},height:A="100%",width:q="100%",className:B,wrapperProps:G={},beforeMount:J=D,onMount:K=D}){let[M,T]=(0,u.useState)(!1),[O,f]=(0,u.useState)(!0),y=(0,u.useRef)(null),d=(0,u.useRef)(null),w=(0,u.useRef)(null),p=(0,u.useRef)(K),n=(0,u.useRef)(J),b=(0,u.useRef)(!1);k(()=>{let s=pe.default.init();return s.then(x=>(d.current=x)&&f(!1)).catch(x=>x?.type!=="cancelation"&&console.error("Monaco initialization: error:",x)),()=>y.current?I():s.cancel()}),l(()=>{let s=y.current.getModifiedEditor();s.getOption(d.current.editor.EditorOption.readOnly)?s.setValue(t||""):t!==s.getValue()&&(s.executeEdits("",[{range:s.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),s.pushUndoStop())},[t],M),l(()=>{y.current?.getModel()?.original.setValue(e||"")},[e],M),l(()=>{let{original:s,modified:x}=y.current.getModel();d.current.editor.setModelLanguage(s,o||r||"text"),d.current.editor.setModelLanguage(x,c||r||"text")},[r,o,c],M),l(()=>{d.current?.editor.setTheme(C)},[C],M),l(()=>{y.current?.updateOptions(E)},[E],M);let U=(0,u.useCallback)(()=>{if(!d.current)return;n.current(d.current);let s=P(d.current,e||"",o||r||"text",m||""),x=P(d.current,t||"",c||r||"text",g||"");y.current?.setModel({original:s,modified:x})},[r,t,c,e,o,m,g]),v=(0,u.useCallback)(()=>{!b.current&&w.current&&(y.current=d.current.editor.createDiffEditor(w.current,{automaticLayout:!0,...E}),U(),d.current?.editor.setTheme(C),T(!0),b.current=!0)},[E,C,U]);(0,u.useEffect)(()=>{M&&p.current(y.current,d.current)},[M]),(0,u.useEffect)(()=>{!O&&!M&&v()},[O,M,v]);function I(){let s=y.current?.getModel();S||s?.original?.dispose(),j||s?.modified?.dispose(),y.current?.dispose()}return u.default.createElement(N,{width:q,height:A,isEditorReady:M,loading:L,_ref:w,className:B,wrapperProps:G})}var ae=Ne;var me=(0,le.memo)(ae);var Me=require("react"),Z=h(require("@monaco-editor/loader"));function Ve(){let[e,t]=(0,Me.useState)(Z.default.__getMonacoInstance());return k(()=>{let r;return e||(r=Z.default.init(),r.then(o=>{t(o)})),()=>r?.cancel()}),e}var ye=Ve;var Ce=require("react");var i=h(require("react")),xe=h(require("@monaco-editor/loader"));var z=require("react");function ze(e){let t=(0,z.useRef)();return(0,z.useEffect)(()=>{t.current=e},[e]),t.current}var Ee=ze;var F=new Map;function Fe({defaultValue:e,defaultLanguage:t,defaultPath:r,value:o,language:c,path:m,theme:g="light",line:S,loading:j="Loading...",options:C={},overrideServices:L={},saveViewState:E=!0,keepCurrentModel:A=!1,width:q="100%",height:B="100%",className:G,wrapperProps:J={},beforeMount:K=D,onMount:M=D,onChange:T,onValidate:O=D}){let[f,y]=(0,i.useState)(!1),[d,w]=(0,i.useState)(!0),p=(0,i.useRef)(null),n=(0,i.useRef)(null),b=(0,i.useRef)(null),U=(0,i.useRef)(M),v=(0,i.useRef)(K),I=(0,i.useRef)(),s=(0,i.useRef)(o),x=Ee(m),ee=(0,i.useRef)(!1),Q=(0,i.useRef)(!1);k(()=>{let a=xe.default.init();return a.then(R=>(p.current=R)&&w(!1)).catch(R=>R?.type!=="cancelation"&&console.error("Monaco initialization: error:",R)),()=>n.current?he():a.cancel()}),l(()=>{let a=P(p.current,e||o||"",t||c||"",m||r||"");a!==n.current?.getModel()&&(E&&F.set(x,n.current?.saveViewState()),n.current?.setModel(a),E&&n.current?.restoreViewState(F.get(m)))},[m],f),l(()=>{n.current?.updateOptions(C)},[C],f),l(()=>{!n.current||o===void 0||(n.current.getOption(p.current.editor.EditorOption.readOnly)?n.current.setValue(o):o!==n.current.getValue()&&(Q.current=!0,n.current.executeEdits("",[{range:n.current.getModel().getFullModelRange(),text:o,forceMoveMarkers:!0}]),n.current.pushUndoStop(),Q.current=!1))},[o],f),l(()=>{let a=n.current?.getModel();a&&c&&p.current?.editor.setModelLanguage(a,c)},[c],f),l(()=>{S!==void 0&&n.current?.revealLine(S)},[S],f),l(()=>{p.current?.editor.setTheme(g)},[g],f);let te=(0,i.useCallback)(()=>{if(!(!b.current||!p.current)&&!ee.current){v.current(p.current);let a=m||r,R=P(p.current,o||e||"",t||c||"",a||"");n.current=p.current?.editor.create(b.current,{model:R,automaticLayout:!0,...C},L),E&&n.current.restoreViewState(F.get(a)),p.current.editor.setTheme(g),y(!0),ee.current=!0}},[e,t,r,o,c,m,C,L,E,g]);(0,i.useEffect)(()=>{f&&U.current(n.current,p.current)},[f]),(0,i.useEffect)(()=>{!d&&!f&&te()},[d,f,te]),s.current=o,(0,i.useEffect)(()=>{f&&T&&(I.current?.dispose(),I.current=n.current?.onDidChangeModelContent(a=>{Q.current||T(n.current.getValue(),a)}))},[f,T]),(0,i.useEffect)(()=>{if(f){let a=p.current.editor.onDidChangeMarkers(R=>{let X=n.current.getModel()?.uri;if(X&&R.find(Y=>Y.path===X.path)){let Y=p.current.editor.getModelMarkers({resource:X});O?.(Y)}});return()=>{a?.dispose()}}return()=>{}},[f,O]);function he(){I.current?.dispose(),A?E&&F.set(m,n.current.saveViewState()):n.current.getModel()?.dispose(),n.current.dispose()}return i.default.createElement(N,{width:q,height:B,isEditorReady:f,loading:j,_ref:b,className:G,wrapperProps:J})}var ge=Fe;var $=(0,Ce.memo)(ge);var je=$;0&&(module.exports={DiffEditor,Editor,loader,useMonaco});
//# sourceMappingURL=index.js.map